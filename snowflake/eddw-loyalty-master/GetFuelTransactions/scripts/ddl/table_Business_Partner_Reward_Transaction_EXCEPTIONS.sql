--liquibase formatted sql
--changeset SYSTEM:Business_Partner_Reward_Transaction_EXCEPTIONS runOnChange:true splitStatements:false OBJECT_TYPE:TABLE
use database <<EDM_DB_NAME>>;
use schema <<EDM_DB_NAME>>.DW_C_STAGE;

create or replace TABLE BUSINESS_PARTNER_REWARD_TRANSACTION_EXCEPTIONS (
	BUSINESS_PARTNER_INTEGRATION_ID NUMBER(38,0),
	RETAIL_CUSTOMER_UUID VARCHAR(16777216),
	PARTNER_PARTICIPANT_ID VARCHAR(50),
	PARTNER_SITE_ID VARCHAR(50),
	PARTNER_ID VARCHAR(50),
	TRANSACTION_ID VARCHAR(100),
	TRANSACTION_TS TIMESTAMP_LTZ(9),
	TRANSACTION_TYPE_CD VARCHAR(50),
	TRANSACTION_TYPE_DSC VARCHAR(250),
	TRANSACTION_TYPE_SHORT_DSC VARCHAR(50),
	REFERENCE_NBR VARCHAR(100),
	ALT_TRANSACTION_ID VARCHAR(100),
	ALT_TRANSACTION_TYPE_CD VARCHAR(50),
	ALT_TRANSACTION_TYPE_DSC VARCHAR(250),
	ALT_TRANSACTION_TYPE_SHORT_DSC VARCHAR(50),
	PARTNER_DIVISION_ID VARCHAR(10),
	POSTAL_ZONE_CD VARCHAR(20),
	CUSTOMER_DIVISION_ID VARCHAR(10),
	OLD_CLUB_CARD_NBR VARCHAR(50),
	STATUS_TYPE_CD VARCHAR(50),
	STATUS_TYPE_DSC VARCHAR(50),
	STATUS_TYPE_EFFECTIVE_TS TIMESTAMP_LTZ(9),
	FUEL_PUMP_ID VARCHAR(50),
	REGISTER_ID VARCHAR(50),
	FUEL_GRADE_CD VARCHAR(50),
	FUEL_GRADE_DSC VARCHAR(250),
	FUEL_GRADE_SHORT_DSC VARCHAR(50),
	TENDER_TYPE_CD VARCHAR(50),
	TENDER_TYPE_DSC VARCHAR(250),
	TENDER_TYPE_SHORT_DSC VARCHAR(50),
	REWARD_MESSAGE_ID VARCHAR(50),
	REWARD_TOKEN_OFFERED_QTY VARCHAR(50),
	TOTAL_PURCHASE_QTY VARCHAR(50),
	PURCHASE_UOM_CD VARCHAR(10),
	PURCHASE_UOM_NM VARCHAR(25),
	PURCHASE_DISCOUNT_LIMIT_QTY VARCHAR(50),
	PURCHASE_DISCOUNT_AMT VARCHAR(50),
	TOTAL_FUEL_PURCHASE_AMT VARCHAR(50),
	NONFUEL_PURCHASE_AMT VARCHAR(50),
	TOTAL_PURCHASE_AMT VARCHAR(50),
	DISCOUNT_AMT VARCHAR(50),
	EXCEPTION_TYPE_DSC VARCHAR(250),
	EXCEPTION_TYPE_SHORT_DSC VARCHAR(50),
	EXCEPTION_TRANSACTION_TS TIMESTAMP_LTZ(9),
	CREATE_TS TIMESTAMP_LTZ(9),
	CREATE_USER_ID VARCHAR(50),
	UPDATE_TS TIMESTAMP_LTZ(9),
	UPDATE_USER_ID VARCHAR(50),
	CUSTOMERID VARCHAR(50),
	CREATIONDT TIMESTAMP_NTZ(9),
	FILENAME VARCHAR(16777216),
	EXCEPTION_REASON VARCHAR(16777216),
	DW_CREATE_TS TIMESTAMP_LTZ(9),
	CLUB_CARD_NBR VARCHAR(100),
	HOUSEHOLD_ID NUMBER(38,0),
	CUSTOMER_PHONE_NBR NUMBER(38,0),
	TOTAL_SAVINGS_VALUE_AMT NUMBER(18,2)
);
