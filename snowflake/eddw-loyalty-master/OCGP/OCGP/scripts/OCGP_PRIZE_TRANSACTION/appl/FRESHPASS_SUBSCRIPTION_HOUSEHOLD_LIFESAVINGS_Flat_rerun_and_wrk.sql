--liquibase formatted sql
--changeset SYSTEM:FRESHPASS_SUBSCRIPTION_HOUSEHOLD_LIFESAVINGS_FLAT_RERUN_AND_WRK runOnChange:true splitStatements:false OBJECT_TYPE:TABLE

USE DATABASE <<EDM_DB_NAME>>;
USE SCHEMA DW_C_STAGE;

CREATE OR REPLACE TRANSIENT TABLE FRESHPASS_SUBSCRIPTION_HOUSEHOLD_LIFESAVINGS_FLAT_RERUN
(
	HOUSEHOLDID VARCHAR(16777216),
	DELIVERYSAVINGS VARCHAR(16777216),
	PERKSSAVINGS VARCHAR(16777216),
	TOTALSAVINGS VARCHAR(16777216),
	PLANCELEBRATEDSAVINGS VARCHAR(16777216),
	PLANCELEBRATEDDATE VARCHAR(16777216),
	DELIVERYORDERCOUNT VARCHAR(16777216),
	DUGORDERCOUNT VARCHAR(16777216),
	INSTOREORDERCOUNT VARCHAR(16777216),
	REWARDSEARNED VARCHAR(16777216),
	CREATEDON VARCHAR(16777216),
	CREATEDBY VARCHAR(16777216),
	MODIFIEDON VARCHAR(16777216),
	MODIFIEDBY VARCHAR(16777216),
	FILENAME VARCHAR(16777216),
	DW_CREATETS TIMESTAMP_TZ(9),
	METADATA$ACTION VARCHAR(10),
	METADATA$ISUPDATE BOOLEAN,
	METADATA$ROW_ID VARCHAR(40)
);

CREATE OR REPLACE TRANSIENT TABLE FRESHPASS_SUBSCRIPTION_HOUSEHOLD_LIFESAVINGS_TMP_WRK
(
	HOUSEHOLDID VARCHAR(16777216),
	DELIVERYSAVINGS VARCHAR(16777216),
	PERKSSAVINGS VARCHAR(16777216),
	TOTALSAVINGS VARCHAR(16777216),
	PLANCELEBRATEDSAVINGS VARCHAR(16777216),
	PLANCELEBRATEDDATE VARCHAR(16777216),
	DELIVERYORDERCOUNT VARCHAR(16777216),
	DUGORDERCOUNT VARCHAR(16777216),
	INSTOREORDERCOUNT VARCHAR(16777216),
	REWARDSEARNED VARCHAR(16777216),
	CREATEDON VARCHAR(16777216),
	CREATEDBY VARCHAR(16777216),
	MODIFIEDON VARCHAR(16777216),
	MODIFIEDBY VARCHAR(16777216),
	FILENAME VARCHAR(16777216),
	DW_CREATETS TIMESTAMP_TZ(9),
	METADATA$ACTION VARCHAR(10),
	METADATA$ISUPDATE BOOLEAN,
	METADATA$ROW_ID VARCHAR(40)
);

CREATE OR REPLACE TRANSIENT TABLE FRESHPASS_SUBSCRIPTION_HOUSEHOLD_LIFESAVINGS_WRK
(
	Household_Id VARCHAR(16777216),
	Delivery_Savings_Amt NUMBER(8,2),
	Perk_Savings_Amt NUMBER(8,2),
	Total_Savings_Amt NUMBER(8,2)),
	Plan_Clebrated_Savings_Amt NUMBER(8,2),
	Plan_Celebrated_Ts TIMESTAMP,
	Delivery_Order_Cnt NUMBER,
	Dug_Order_Cnt NUMBER,
	Instore_Order_Cnt NUMBER,
	Rewards_Earned_Qty NUMBER,
	Create_Ts TIMESTAMP,
	Create_User_Id VARCHAR(16777216),
	Update_Ts TIMESTAMP,
	Update_User_Id VARCHAR(16777216),
	FILENAME VARCHAR(16777216),
	DW_CREATETS TIMESTAMP_TZ(9),
	DML_TYPE VARCHAR(1),
    SAMEDAY_CHNG_IND VARCHAR(1)
);